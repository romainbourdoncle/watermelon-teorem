<!DOCTYPE html>
<html>
  <head>
    <title>Circle with Regions</title>
    <style>
      svg {
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
    <svg id="circleSVG" width="400" height="400">
      <!-- Elements du SVG seront ajoutÃ©s ici -->
    </svg>
    <script>
      const svg = document.getElementById('circleSVG');
      const radius = 100;
      const centerX = 200;
      const centerY = 200;

      function drawCircleAndRegions(Px, Py) {
        // Clear SVG
        svg.innerHTML = '';

        // Draw main circle
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('cx', centerX);
        circle.setAttribute('cy', centerY);
        circle.setAttribute('r', radius);
        circle.setAttribute('stroke', 'black');
        circle.setAttribute('fill', 'none');
        svg.appendChild(circle);

        // Draw point P
        const pointP = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        pointP.setAttribute('cx', Px);
        pointP.setAttribute('cy', Py);
        pointP.setAttribute('r', 5);
        pointP.setAttribute('fill', 'green');
        svg.appendChild(pointP);

        // Draw lines and fill regions
        const divisions = 8;
        const angleStep = (Math.PI * 2) / divisions;
        let angle = 0;
        for (let i = 0; i < divisions; ++i, angle += angleStep) {
          const x = centerX + radius * Math.cos(angle);
          const y = centerY + radius * Math.sin(angle);

          // Draw lines from point P to circle edge
          const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
          line.setAttribute('x1', Px);
          line.setAttribute('y1', Py);
          line.setAttribute('x2', x);
          line.setAttribute('y2', y);
          line.setAttribute('stroke', 'black');
          line.setAttribute('stroke-dasharray', '5,5');
          svg.appendChild(line);

          // Draw filled regions
          const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
          const nextX = centerX + radius * Math.cos(angle + angleStep);
          const nextY = centerY + radius * Math.sin(angle + angleStep);
          const d = `
            M ${Px} ${Py}
            L ${x} ${y}
            A ${radius} ${radius} 0 0 1 ${nextX} ${nextY}
            Z
          `;
          path.setAttribute('d', d);
          path.setAttribute('fill', i % 2 === 0 ? 'green' : 'red');
          path.setAttribute('fill-opacity', '0.4');
          svg.appendChild(path);
        }
      }

      // Initial drawing
      drawCircleAndRegions(centerX, centerY);

      // Handle click events
      svg.addEventListener('click', function(event) {
        const rect = svg.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        drawCircleAndRegions(x, y);
      });
    </script>
  </body>
</html>
